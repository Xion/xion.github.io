<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="http://xion.io/$theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="http://xion.io/$theme/stylesheet/pygments.min.css">
  <link rel="stylesheet" type="text/css" href="http://xion.io/$theme/stylesheet/font-awesome.min.css">

    <link href="http://xion.io/style.css" rel="stylesheet">




  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

    <meta name="author" content="Karol Kuczmarski" />
    <meta name="description" content="" />
<meta property="og:site_name" content="Karol Kuczmarski's Blog"/>
<meta property="og:type" content="blog"/>
<meta property="og:title" content="Karol Kuczmarski's Blog"/>
<meta property="og:description" content=""/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="http://xion.io"/>
<meta property="og:image" content="http://xion.io/logo.jpeg">

  <title>Karol Kuczmarski's Blog &ndash; Tag: open source</title>
</head>
<body>
  <aside>
    <div>
      <a href="http://xion.io">
        <img src="http://xion.io/logo.jpeg" alt="Karol Kuczmarski" title="Karol Kuczmarski">
      </a>
      <h1><a href="http://xion.io">Karol Kuczmarski</a></h1>
      <p>fn(Tea) -> Code</p>
      <nav>
        <ul class="list">
          <li><a href="http://xion.io/page/about.html#about">About</a></li>
          <li><a href="http://xion.io/page/projects.html#projects">Projects</a></li>
        </ul>
      </nav>
      <ul class="social">
        <li><a class="sc-github" href="http://github.com/Xion" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-stack-overflow" href="http://stackoverflow.com/users/434799/xion" target="_blank"><i class="fa fa-stack-overflow"></i></a></li>
        <li><a class="sc-twitter" href="http://twitter.com/Xion__" target="_blank"><i class="fa fa-twitter"></i></a></li>
        <li><a class="sc-google" href="https://plus.google.com/+KarolKuczmarski" target="_blank"><i class="fa fa-google"></i></a></li>
        <li><a class="sc-rss" href="/feeds/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></li>
      </ul>
    </div>
  </aside>
  <main>
    <nav>
      <a href="http://xion.io">Home</a>
      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>
      <a href="http://xion.org.pl/">Old blog</a>
    </nav>

<article>
  <header>
    <h2><a href="http://xion.io/post/programming/another-npm-snafu.html#another-npm-snafu">Yes, the npm ecosystem is at&nbsp;fault</a></h2>
    <p>
      Posted on Tue 27 November 2018 in <a href="http://xion.io/category/programming.html">Programming</a>
      &#8226; Tagged with
      <a href="http://xion.io/tag/npm.html">npm</a>,      <a href="http://xion.io/tag/javascript.html">Javascript</a>,      <a href="http://xion.io/tag/open-source.html">open source</a>,      <a href="http://xion.io/tag/package-manager.html">package manager</a>,      <a href="http://xion.io/tag/security.html">security</a>      &#8226; <a href="http://xion.io/post/programming/another-npm-snafu.html#disqus_thread">Leave a comment</a>
    </p>
  </header>
  <div>
      <p>Even if you are like me and don&#8217;t use any (server-side) Javascript, or node.js, or npm,
it may feel like every other week there are news about
<a href="https://github.com/dominictarr/event-stream/issues/116">yet another npm snafu</a>.</p>
<p>The latest incident could be the most severe one yet,
at least from the security standpoint.
<a href="https://arstechnica.com/information-technology/2018/11/hacker-backdoors-widely-used-open-source-software-to-steal-bitcoin/">In a nutshell</a>,
the owner of <em>event-stream</em> &#8212; a popular package even by npm standards &#8212;
had transferred ownership of it to another person.
The new owner would then publish a new version of the package
which contained a targeted backdoor, intended to <em>steal large amounts of Bitcoin</em>
from the users of one particular wallet&nbsp;provider.</p>
<p>Quite a step up from <a href="https://www.theregister.co.uk/2016/03/23/npm_left_pad_chaos/">the <em>left-pad</em> fiasco</a>, isn&#8217;t&nbsp;it?&#8230;</p>
<p>Like it usually happens with any major incident,
lots of people are eager to put the blame on someone, or something, as quickly as possible.
Rather unsurprisingly, the original owner of <em>event-stream</em> came up as a pretty obvious target.
Without his abdication of ownership rights, the argument goes,
the entire ordeal wouldn&#8217;t have happened in the first place.
More broadly, as a maintainer of a popular package,
<a href="https://github.com/dominictarr/event-stream/issues/116#issuecomment-441161123">he owes it to the community</a>
to make sure it remains available and safe to use,
now and for the foreseeable&nbsp;future.</p>
<p>But if those are the responsibilities, then what are the rewards?&#8230;
Well, in the author&#8217;s own words,
<a href="https://gist.github.com/dominictarr/9fd9c1024c94592bc7268d36b8d83b3a">&#8220;you get literally nothing from maintaing a popular package&#8221;</a>.
Looks like once the fun of it wears off, it&#8217;s just all work and no play,
for little to no tangible&nbsp;benefit.</p>
<p>This problem is of course not specific to Javascript or npm.
Here&#8217;s, for example,
<a href="https://gist.github.com/richhickey/1563cddea1002958f96e7ba9519972d9">a good take on the issue</a>
from the creator of <a href="https://clojure.org/">Clojure</a>.</p>
<p>However, this <em>doesn&#8217;t mean</em> every other package manager is equally susceptible
to the sort of issues that have shaken npm <a href="https://blog.npmjs.org/post/173526807575/reported-malicious-module-getcookies">time</a>
and
<a href="https://blog.npmjs.org/post/163723642530/crossenv-malware-on-the-npm-registry">time again</a>.
To say the same thing could&#8217;ve happened to Python/Ruby/Go/Haskell/etc. is vacuous.
While factually true, it&#8217;s an instance of the
<a href="https://www.lesswrong.com/posts/dLJv2CoRCgeC2mPgj/the-fallacy-of-gray">Fallacy of Grey</a>:
a claim that because nothing is <em>ideal</em>, everything must be <em>equally flawed</em>.</p>
<p>In reality, the Javascript ecosystem facilitated by npm is
<a href="https://www.reddit.com/r/programming/comments/a0kxmw/i_dont_know_what_to_say_backdoor_in_popular/eaij0rt/">singularly vulnerable</a>
to problems of this kind.
It follows directly from how granular the npm packages are, and how wide and deep their dependency trees&nbsp;get.</p>
<p>Indeed, it would be quite a fascinating exercise to quantify the difference numerically,
by comparing the average size of a dependency graph between npm, PyPI, Rubygems, Hoogle, and so on.
It&#8217;s rather obvious npm would come as a &#8220;winner&#8221;, likely with Rust&#8217;s Cargo not very far&nbsp;behind.</p>
<p>Apparently, this not unintentional either &#8212;
the node.js community seems to <a href="https://twitter.com/joepie91/status/1065193459349446656">like it this way</a>.
But as the yesterday&#8217;s incident has exposed,
this state of affairs relies on the distributed conscientiousness of <em>very</em> many parties
&#8212; in this case, npm package authors.
When one inevitably falters, the impact reaches far and wide,
rippling through the massively intertwined npm&nbsp;registry.</p>
<p>While it may be satisfying, then, to blame the package owner as the immediate culprit,
it&#8217;s way more productive to consider how the damage could have been&nbsp;mitigated.</p>
<p>We can, for example, look at the unimaginably dense dependency graph of npm &#8212;
if anyone ever dared to visualize it in its entirety &#8212;
and realize it shouldn&#8217;t really have so many edges.
Had it been little sparser, more similar to the graphs of PyPI or Ruby,
then removing (i.e. compromising) a single leaf node would&#8217;ve had proportionally smaller&nbsp;impact.</p>
<p>So yes, it&#8217;s true that all package managers are exposed to the risk of compromised packages.
It is, however, something that can be estimated and compared &#8212; and unfortunately,
it is clear that for npm, this risk is currently the&nbsp;largest.</p>
      <a class="btn" href="http://xion.io/post/programming/another-npm-snafu.html#another-npm-snafu">Continue reading</a>
  </div>
</article>

  <div class="pagination">
  </div>

    <footer>
<p>
  &copy; Karol Kuczmarski 2019 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>Built using <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
         src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27379564-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->



<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Karol Kuczmarski's Blog ",
  "url" : "http://xion.io",
  "image": "http://xion.io/logo.jpeg",
  "description": ""
}
</script><script type="text/javascript">
    var disqus_shortname = 'xionblog';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>